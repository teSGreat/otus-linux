# Заметки к ДЗ-16

В [Vagrantfile](Vagrantfile) обычная ВМ без каких-либо специфических настроек, но с дополнительной внешней сетью на физическом интерфейсе хоста. Это совершенно необязательно, но сделано для удобства тестирования контейнера с nginx с хоста. Файлы для сборки docker-образа находятся в каталоге [docker](docker).

## Разница между контейнером и образом.

Если коротко, то docker-контейнер, это образ, но с rw-слоем. Именно в этот слой и вносятся все изменения внутри контейнера.

## Можно ли в контейнере собрать ядро?

Думаю, что можно. Сборка ядра ничем кардинальным не отличается от простой компиляции любого другого ПО. В зависимости от того, какое ядро и для какой ОС linux мы собираем, достаточно установить соответствующие пакеты, определить нужные параметры в конфиге нашего будущего ядра и задействовать нужные модули.

Вот несколько примеров:

https://github.com/tomzo/docker-kernel-ide

https://github.com/moul/docker-kernel-builder

https://www.olimex.com/forum/index.php?topic=4498.0

## Последовательность действий при сборке docker-образа:

Из простецкого [Dockerfile](docker/Dockerfile) собираем образ с именем otus-nginx

```
docker build -t otus-nginx .
```

Запускаем контейнер на основе образа otus-nginx

```
docker run --rm -d -p 80:80 otus-nginx
```

Подключиться к этому контейнеру можно так

```
docker exec -it id_контейнера_или_его_имя bash
```

Логинимся на https://hub.docker.com

```
docker login
```

Задаем тэг нашему образу

```
docker tag otus-nginx:latest timlok/otus:otus01
```

Пушим образ

```
docker push timlok/otus:otus01
```

[Ссылка на репозиторий с образом на docker hub.](https://hub.docker.com/r/timlok/otus)